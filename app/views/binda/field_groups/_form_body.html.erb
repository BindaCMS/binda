<div class="standard-form">

<%= simple_form_for @field_group, url: get_form_field_group_url, html: { class: 'form-body' } do |f| %>

  <div class="standard-form--body">

    <% if @field_group.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize( @field_group.errors.count, "error") %> prohibited this field_group from being saved:</h2>

        <ul>
        <% @field_group.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="standard-form--container">

      <div class="standard-form--header">
        <p><%= "#{ t :details }".capitalize %></p>
      </div>

      <%= f.input :name, label: "#{ t :title }".capitalize %>

      <% if @field_group.slug.nil? %>
        <%= f.input :slug, as: :hidden %>
      <% else %>
        <%= f.input :slug %>
      <% end %>

    </div>

    <div class="standard-form--container">

      <div id="form-section--field-group-<%= @field_group.id %>" class="form-section--wide-container">

        <%= render "form_section", f: f %>

      </div>

      <% @field_group.field_settings.where( field_type: 'repeater' ).order( :position, :id ).each do |repeater| %>
        <div id="form-section--repeater-<%= repeater.id %>" class="form-section--wide-container">
          <div class="form-section">

            <h4><%= repeater.name.capitalize %></h4>

            <%= render "form_section_repeater", f: f, repeater: repeater %>

          </div>
        </div>
      <% end %>

    </div>

  </div>

  <div class="standard-form--sidebar">

    <div class="standard-form--container">

      <div class="standard-form--header">
        <p><%= "#{ t :setting }".pluralize.capitalize %></p>
      </div>

      <div class="standard-form--main-actions">

        <%= button_tag '<i class="fas fa-check"></i>Save changes'.html_safe, {
            class: 'b-btn b-btn-primary b-btn-settings',
            id: 'save',
            'data-entries-number': "Binda::#{@structure.instance_type.classify}".constantize.where(structure_id:@structure.id).count,
            'data-instance-type': @structure.instance_type.pluralize
        } %>
      </div>

    </div>

  </div>

<% end %>

</div>