<% content_for :header do %>
  <div class="main-header--buttons">
    <%= link_to "New #{ @structure.name.humanize.split.map(&:capitalize).join(' ') }", new_structure_component_path , class: 'main-header--link btn btn-primary' %>    
  </div>

  <h3>Sort <%= @structure.name.humanize.split.map(&:capitalize).join(' ').pluralize %></h3>
  <a href="<%= structure_components_path %>" class="main-header--back"><span class="glyphicon glyphicon-list"></span> <%= "#{ t :back_to_index }".capitalize %></a>
<% end %>

<% content_for :content do %>
  <div class="sortable-warning sortable-warning--hidden">
      <div class="sortable-warning--loader">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
      <p>Updating components position...</p>
  </div>
  <div class="main-table--div">

      <h5 class="text-muted">Drag &amp; drop using the handle to sort your <%= @structure.name.humanize.split.join(' ').pluralize %>. Changes are automatically saved.</h5>

      <table class="standard-form--container">
        <thead>
          <tr>
            <th class="standard-form--header"><span class="glyphicon glyphicon-move" aria-hidden="true" style="margin-left: 8px;"></span></th>
            <th class="standard-form--header">Title</th>
            <th class="standard-form--header">Publish state</th>
            <th class="standard-form--header"></th>
          </tr>
        </thead>
        <tbody id="<%= @structure.slug %>-components--sort-index" class="sortable" data-update-url="<%= structure_components_sort_path( @structure.slug ) %>">
          <% @components.order( :position, :name ).each do |component| %>
            <tr id="component_<%= component.id %>">  
              <td><span class="sortable--handle"></span></td>
              <td><%= link_to component.name, structure_component_path( @structure.slug, component ) %></td>
              <td><%= component.publish_state %></td>
              <td></td>
            </tr>
          <% end %>
        <tbody>
      </table>

    <%= link_to "New #{ @structure.name.humanize.split.map(&:capitalize).join(' ') }", new_structure_component_path, class: 'main-header--link btn btn-default', action: "new" %>    
        
  </div>
<% end %>
