<div id="form-item--repeater-section-<%= repeater_setting.id %>" class="form-item form-item--label-on-left form-item--repeater-section">
	<h4><%= repeater_setting.name %></h4>

<% if repeaters.size == 0 %>

		<% repeater = @component.find_or_create_a_field_by( repeater_setting.id, 'repeater' ) %>

		<%# - - - - - - - - - - - - %>
		<%# REMOVE BUTTON           %>
		<%# - - - - - - - - - - - - %>
		<a href="<%= repeater_path( id: repeater.id ) %>" data-method="delete" data-confirm="This operation will delete this group of fields. Are you ok with that?"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>

		<%# - - - - - - - - - - - - - - %>
		<%# FIRST REPEATER              %>
		<%# - - - - - - - - - - - - - - %>
		<div class="form-item--repeater-fields">
	    <%= f.simple_fields_for "repeaters_attributes[]", repeater do |ff| %>
				<%= ff.input :fieldable_id, as: :hidden %>
				<%= ff.input :fieldable_type, as: :hidden %>
	    	<%= ff.input :field_setting_id, as: :hidden, input_html: { value: repeater_setting.id } %>
				<%= ff.input :id, as: :hidden, input_html: { value: ff.object.id } %>
				<% repeater_setting.children.order( :position ).each do |repeater_setting_child| %>
				  <%= render "form_section_repeater", f: ff, repeater_setting_child: repeater_setting_child, repeater: repeater %>
			  <% end %>
			<% end %>
		</div>

<% else %>

  <% repeaters.each do |repeater| %>

		<%# - - - - - - - - - - - - %>
		<%# REMOVE BUTTON           %>
		<%# - - - - - - - - - - - - %>
		<a href="<%= repeater_path( id: repeater.id ) %>" data-method="delete" data-confirm="This operation will delete this group of fields. Are you ok with that?"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>

		<%# - - - - - - - - - - - - - - %>
		<%# EACH REPEATER               %>
		<%# - - - - - - - - - - - - - - %>
		<div class="form-item--repeater-fields">
	    <%= f.simple_fields_for "repeaters_attributes[]", repeater do |ff| %>
	    	<%= ff.input :field_setting_id, as: :hidden, input_html: { value: repeater_setting.id } %>
				<%= ff.input :id, as: :hidden, input_html: { value: ff.object.id } %>
				<%= ff.input :fieldable_id, as: :hidden %>
				<%= ff.input :fieldable_type, as: :hidden %>
				<% repeater_setting.children.order( :position ).each do |repeater_setting_child| %>
				  <%= render "form_section_repeater", f: ff, repeater_setting_child: repeater_setting_child, repeater: repeater %>
			  <% end %>
		  <% end %>
		</div>

  <% end %>

<% end %>

</div>


<%# - - - - - - - - - - - - - - %>
<%# ADD NEW REPEATER FIELDS     %>
<%# - - - - - - - - - - - - - - %>
<a class="form-item--repeater-section--add-new main-header--link btn btn-default" href="#" data-url="<%= structure_component_new_repeater_path( structure_id: @structure.id, component_id: @component.id ) %>" data-id="<%= repeater_setting.id %>">
  <%= t :new_item_in_repeater %>
</a>

<hr>