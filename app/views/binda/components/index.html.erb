<% content_for :header do %>
  <div class="main-header--buttons">
    <%= link_to "New #{ @structure.name.humanize.split.map(&:capitalize).join(' ') }", new_structure_component_path , class: 'main-header--link btn btn-primary' %>
    <%= get_sort_index_link %>
  </div>
  <h3><%= @structure.name.humanize.split.map(&:capitalize).join(' ').pluralize %></h3>
<% end %>

<% content_for :content do %> 
  <div class="main-table--row row">
    <div class="col-sm-12">

      <table class="table table-striped">
        <thead>
          <tr>
            <th class="col-sm-5">
              <a href="<%= 
                if params[:order] == 'LOWER(name) ASC'
                  structure_components_path([@structure], order:'LOWER(name) DESC') 
                else
                  structure_components_path([@structure], order:'LOWER(name) ASC') 
                end
                %>">
                Title
              </a>
            </th>
            <th class="col-sm-2">
              <a href="<%= 
                if params[:order] == 'publish_state ASC, LOWER(name) ASC'
                  structure_components_path([@structure], order:'publish_state DESC, LOWER(name) ASC') 
                else
                  structure_components_path([@structure], order:'publish_state ASC, LOWER(name) ASC') 
                end
                %>">
                Publish state
              </a>
            </th>
            <th class="col-sm-3"></th>
          </tr>
        </thead>
        <tbody>
          <% @components.each do |component| %>
            <tr id="component_<%= component.id %>">  
              <td><%= link_to component.name, structure_component_path( @structure.slug, component ) %></td>
              <td><%= component.publish_state %></td>
              <td>
                  <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 
                  <%= link_to 'Edit', edit_structure_component_path( @structure.slug, component ) %> 
                  <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> 
                  <%= link_to 'Destroy', structure_component_path( @structure.slug, component.slug ), method: :delete, data: { confirm: 'Are you sure?' }, class: 'text-danger' %>
              </td>
            </tr>
          <% end %>
        <tbody>
      </table>

    <%= paginate @components %>

    <%= link_to "New #{ @structure.name.humanize.split.map(&:capitalize).join(' ') }", new_structure_component_path, class: 'main-header--link btn btn-default', action: "new" %>    
    <%= get_sort_index_link %>
        
  </div>
</div>
<% end %>
