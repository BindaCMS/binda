<% content_for :header do %>
  <div class="main-header--buttons">
    <%= link_to "New #{ @structure.name.humanize.split.map(&:capitalize).join(' ') }", new_structure_component_path , class: 'main-header--link b-btn b-btn-primary' %>
    <%= get_sort_index_link %>
  </div>
  <h3><%= @structure.name.humanize.split.map(&:capitalize).join(' ').pluralize %></h3>
<% end %>

<% content_for :content do %> 

    <div class="main-table--div">

      <table class="standard-form--container">

        <thead>

            <th style="width: 50%", class="standard-form--header">
              <a href="<%=
                if params[:order] == 'LOWER(name) ASC'
                  structure_components_path([@structure], order:'LOWER(name) DESC')
                else
                  structure_components_path([@structure], order:'LOWER(name) ASC')
                end
                %>">
                Title
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
              </a>
            </th>
            <th style="width: 20%", class="standard-form--header">
              <a href="<%=
                if params[:order] == 'publish_state ASC, LOWER(name) ASC'
                  structure_components_path([@structure], order:'publish_state DESC, LOWER(name) ASC')
                else
                  structure_components_path([@structure], order:'publish_state ASC, LOWER(name) ASC')
                end
                %>">
                Publish state
                <i class="fa fa-sort-alpha-asc" aria-hidden="true"></i>
              </a>
            </th>
            <th style="width: 30%", class="standard-form--header"><p style="float: right;">Actions</p></th>

        </thead>
        <tbody>
          <% @components.each do |component| %>
            <tr id="component_<%= component.id %>">
              <td><%= link_to component.name, structure_component_path( @structure.slug, component ) %></td>
              <td><%= component.publish_state %></td>
              <td>
                  <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                  <%= link_to 'Edit', edit_structure_component_path( @structure.slug, component ) %>
                  <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                  <%= link_to 'Destroy', structure_component_path( @structure.slug, component.slug ), method: :delete, data: { confirm: 'Are you sure?' }, class: 'text-danger' %>
              </td>
            </tr>
          <% end %>
        <tbody>

      </table>

      <div class="pagination-links--bar">
        <%= paginate @components %>
      </div>

      <%= link_to "New #{ @structure.name.humanize.split.map(&:capitalize).join(' ') }", new_structure_component_path, class: 'main-header--link btn btn-default', action: "new" %>
      <%= get_sort_index_link %>

    </div>

<% end %>
